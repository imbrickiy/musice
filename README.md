# Musice — минималистичное радио на Flutter

Musice — это небольшой кроссплатформенный радио‑плеер на Flutter. Приложение воспроизводит интернет‑радио (HLS), позволяет выбрать станцию, управлять воспроизведением и громкостью, а также показывает «реактивную» анимацию, которая пульсирует в такт проигрыванию.


## Возможности
- Выбор радиостанции через нижний модальный лист (c безопасным запасным диалогом, если лист не открылся)
- Воспроизведение потоков HLS с помощью `just_audio`
- Кнопка Play/Pause с отображением статусов загрузки/буферизации
- Плавный регулятор громкости с «анимированным» применением значения
- Реактивная анимация «волн» во время проигрывания
- Тёмная тема, шрифт SF Pro
- Для desktop (macOS/Windows/Linux) — фиксированное окно 390×844 (как iPhone 14) через `window_manager`


## Скриншот

![Скриншот](lib/assets/Screenshot%202025-09-10%20094330.png)


## Технологии
- Flutter (Material 3)
- Dart (SDK constraints см. в `pubspec.yaml`)
- just_audio
- window_manager


## Быстрый старт

Требования:
- Установленный Flutter SDK (stable)
- Для iOS/macOS: Xcode, CocoaPods
- Для Windows: инструменты сборки Flutter Desktop

Установка зависимостей:
```zsh
flutter pub get
```

Запуск:
- macOS (desktop):
  ```zsh
  flutter run -d macos
  ```
- iOS (симулятор/устройство):
  ```zsh
  flutter run -d ios
  ```
  Примечание: для реального устройства нужно настроить подпись в Xcode (открыть `ios/Runner.xcworkspace`).
- Windows (desktop):
  ```zsh
  flutter run -d windows
  ```

Сборка релиза (примеры):
- macOS:
  ```zsh
  flutter build macos
  ```
- iOS (архив через Xcode рекомендуется):
  ```zsh
  flutter build ipa
  ```
- Windows:
  ```zsh
  flutter build windows
  ```


## Тесты
Запустить все unit/widget тесты:
```zsh
flutter test
```


## Структура проекта (основное)
- `lib/main.dart` — входная точка, логика выбора/старта станции, управление плеером и анимацией
- `lib/models/station.dart` — модель радиостанции
- `lib/widgets/` — UI‑компоненты (header, play‑section, volume‑section, лист выбора станции)
- `lib/assets/` — изображения/скриншоты
- `lib/fonts/` — шрифт SF Pro (подключён в `pubspec.yaml` как `family: SFPro`)
- `test/` — тесты


## Как добавить/изменить радиостанции
Станции определены в списке `_stations` внутри `lib/main.dart`. Пример элемента:
```text
const Station('Deep', 'https://example.com/playlist.m3u8')
```
Добавьте новую станцию по аналогии. Приложение покажет её в списке выбора.


## Поведение на разных платформах
- На desktop платформах (macOS/Windows/Linux) окно фиксированного размера 390×844. Это задаётся при старте через `window_manager` и соответствует портретной ориентации телефона.
- На iOS работа идёт в полноэкранном мобильном режиме.


## Нюансы и советы
- Потоки HLS должны быть доступными из вашей сети. Если воспроизведение не начинается, проверьте доступность URL и ограничения сети/VPN.
- В логах (`debugPrint`) отображаются ошибки старта потока. Это помогает быстро диагностировать неверный URL или недоступность сервера.
- Если при выборе станции нижний лист не открылся (редкая ситуация), сработает запасной диалог.


## Известные ограничения
- Список станций хранится в коде (в `main.dart`). Для продакшена можно вынести его в конфигурацию/бэкенд или добавить локальное сохранение «избранного».
- Не реализовано авто‑восстановление потока при обрыве. Это потенциальное улучшение.


## Лицензия
На данный момент лицензия не указана. Добавьте файл `LICENSE`, если планируете публиковать проект.
